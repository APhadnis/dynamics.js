(function(){var t,e,i,n,s,r,o,a,l,u,h,p,f,m,c,y,d=function(t,e){return function(){return t.apply(e,arguments)}},v={}.hasOwnProperty,x=function(t,e){for(var i in e){if(v.call(e,i))t[i]=e[i]}function n(){this.constructor=t}n.prototype=e.prototype;t.prototype=new n;t.__super__=e.prototype;return t};s=function(){t.properties={};function t(t){this.options=t!=null?t:{};this.at=d(this.at,this);this.next=d(this.next,this);this.init=d(this.init,this)}t.prototype.init=function(){return this.t=0};t.prototype.next=function(t){var e;if(this.t>1){this.t=1}e=this.at(this.t);this.t+=t;return e};t.prototype.at=function(t){return[t,t]};return t}();u=function(t){x(e,t);function e(){this.at=d(this.at,this);this.init=d(this.init,this);return e.__super__.constructor.apply(this,arguments)}e.properties={duration:{min:100,max:4e3,"default":1e3}};e.prototype.init=function(){return e.__super__.init.apply(this,arguments)};e.prototype.at=function(t){return[t,t]};return e}(s);a=function(t){x(e,t);e.properties={bounce:{min:0,max:80,"default":40},gravity:{min:1,max:4e3,"default":1e3},expectedDuration:{editable:false}};function e(t){var i;this.options=t!=null?t:{};this.at=d(this.at,this);this.curve=d(this.curve,this);this.init=d(this.init,this);this.length=d(this.length,this);this.gravityValue=d(this.gravityValue,this);this.bounceValue=d(this.bounceValue,this);this.duration=d(this.duration,this);this.expectedDuration=d(this.expectedDuration,this);if((i=this.initialForce)==null){this.initialForce=false}this.options.duration=this.duration();e.__super__.constructor.call(this,this.options)}e.prototype.expectedDuration=function(){return this.duration()};e.prototype.duration=function(){return Math.round(1e3*1e3/this.options.gravity*this.length())};e.prototype.bounceValue=function(){var t;t=this.options.bounce/100;t=Math.min(t,80);return t};e.prototype.gravityValue=function(){return this.options.gravity/100};e.prototype.length=function(){var t,e,i,n,s;i=this.bounceValue();s=this.gravityValue();e=Math.sqrt(2/s);n={a:-e,b:e,H:1};if(this.initialForce){n.a=0;n.b=n.b*2}while(n.H>.001){t=n.b-n.a;n={a:n.b,b:n.b+t*i,H:n.H*i*i}}return n.b};e.prototype.init=function(){var t,i,n,s,r,o;e.__super__.init.apply(this,arguments);t=this.length();r=this.gravityValue();r=r*t*t;n=this.bounceValue();i=Math.sqrt(2/r);this.curves=[];s={a:-i,b:i,H:1};if(this.initialForce){s.a=0;s.b=s.b*2}this.curves.push(s);o=[];while(s.b<1&&s.H>.001){t=s.b-s.a;s={a:s.b,b:s.b+t*n,H:s.H*n*n};o.push(this.curves.push(s))}return o};e.prototype.curve=function(t,e,i,n){var s,r,o;s=e-t;o=2/s*n-1-t*2/s;r=o*o*i-i+1;if(this.initialForce){r=1-r}return r};e.prototype.at=function(t){var e,i,n,s,r;e=this.options.bounce/100;n=this.options.gravity;s=0;i=this.curves[s];while(!(t>=i.a&&t<=i.b)){s+=1;i=this.curves[s];if(!i){break}}if(!i){if(this.initialForce){r=0}else{r=1}}else{r=this.curve(i.a,i.b,i.H,t)}return[t,r]};return e}(s);l=function(t){x(e,t);e.prototype.returnsToSelf=true;function e(t){this.options=t!=null?t:{};this.initialForce=true;e.__super__.constructor.call(this,this.options)}return e}(a);f=function(t){x(e,t);function e(){this.at=d(this.at,this);return e.__super__.constructor.apply(this,arguments)}e.properties={frequency:{min:0,max:100,"default":15},friction:{min:1,max:1e3,"default":200},anticipationStrength:{min:0,max:1e3,"default":0},anticipationSize:{min:0,max:99,"default":0},duration:{min:100,max:4e3,"default":1e3}};e.prototype.at=function(t){var e,i,n,s,r,o,a,l,u,h,p,f,m,c=this;a=Math.max(1,this.options.frequency);l=Math.pow(20,this.options.friction/100);h=this.options.anticipationSize/100;o=Math.max(0,h);u=t/(1-h)-h/(1-h);if(t<h){e=function(t){var e,i,n,s,r;e=.8;s=h/(1-h);r=0;n=(s-e*r)/(s-r);i=(e-n)/s;return i*t*c.options.anticipationStrength/100+n};m=h/(1-h)-h/(1-h);f=0/(1-h)-h/(1-h);r=Math.acos(1/e(m));n=(Math.acos(1/e(f))-r)/(a*-h)}else{e=function(t){return Math.pow(l/10,-t)*(1-t)};r=0;n=1}i=e(u);s=a*(t-h)*n+r;p=1-i*Math.cos(s);return[t,p,i,u,s]};return e}(s);p=function(t){x(e,t);function e(){this.at=d(this.at,this);return e.__super__.constructor.apply(this,arguments)}e.properties={frequency:{min:0,max:100,"default":15},friction:{min:1,max:1e3,"default":100},duration:{min:100,max:4e3,"default":1e3}};e.prototype.returnsToSelf=true;e.prototype.at=function(t){var e,i,n,s,r,o,a,l,u=this;o=Math.max(1,this.options.frequency);a=Math.pow(20,this.options.friction/100);e=function(t){return 1-Math.pow(a/10,-t)*(1-t)};i=e(t);n=e(1-t);s=Math.cos(t*2*3.14-3.14)/2+.5;s=Math.pow(s,this.options.friction/100);r=o*t;l=Math.cos(r)*s;return[t,l,s,-s]};return e}(s);i=function(t){x(e,t);e.properties={points:{type:"points","default":[{x:0,y:0,controlPoints:[{x:.2,y:0}]},{x:.574,y:1.208,controlPoints:[{x:.291,y:1.199},{x:.806,y:1.19}]},{x:1,y:1,controlPoints:[{x:.846,y:1}]}]},duration:{min:100,max:4e3,"default":1e3}};function e(t){this.options=t!=null?t:{};this.at=d(this.at,this);this.yForX=d(this.yForX,this);this.B=d(this.B,this);this.B_=d(this.B_,this);this.returnsToSelf=this.options.points[this.options.points.length-1].y===0;e.__super__.constructor.call(this,this.options)}e.prototype.B_=function(t,e,i,n,s){return Math.pow(1-t,3)*e+3*Math.pow(1-t,2)*t*i+3*(1-t)*Math.pow(t,2)*n+Math.pow(t,3)*s};e.prototype.B=function(t,e,i,n,s){return{x:this.B_(t,e.x,i.x,n.x,s.x),y:this.B_(t,e.y,i.y,n.y,s.y)}};e.prototype.yForX=function(t,e){var i,n,s,r,o,a,l,u,h,p;i=null;for(h=0,p=e.length;h<p;h++){n=e[h];if(t>=n(0).x&&t<=n(1).x){i=n}if(i!==null){break}}if(!i){if(this.returnsToSelf){return 0}else{return 1}}u=1e-4;r=0;a=1;o=(a+r)/2;l=i(o).x;s=0;while(Math.abs(t-l)>u&&s<100){if(t>l){r=o}else{a=o}o=(a+r)/2;l=i(o).x;s+=1}return i(o).y};e.prototype.at=function(t){var i,n,s,r,o,a,l,u=this;o=t;r=this.options.points||e.properties.points["default"];i=[];l=function(t,e){var n;n=function(i){return u.B(i,t,t.controlPoints[t.controlPoints.length-1],e.controlPoints[0],e)};return i.push(n)};for(n in r){s=parseInt(n);if(s>=r.length-1){break}l(r[s],r[s+1])}a=this.yForX(o,i);return[o,a]};return e}(s);o=function(t){x(e,t);e.properties={friction:{min:1,max:1e3,"default":500},duration:{min:100,max:4e3,"default":1e3}};function e(t){var n,s;this.options=t!=null?t:{};this.at=d(this.at,this);e.__super__.constructor.apply(this,arguments);n=this.options.friction||e.properties.friction["default"];s=[{x:0,y:0,controlPoints:[{x:1-n/1e3,y:0}]},{x:1,y:1,controlPoints:[{x:n/1e3,y:1}]}];this.bezier=new i({duration:this.options.duration,points:s})}e.prototype.at=function(t){return this.bezier.at(t)};return e}(s);n=function(){function t(){}t.transform=function(){return this.withPrefix("transform")};t.keyframes=function(){if(document.body.style.webkitAnimation!==void 0){return"-webkit-keyframes"}if(document.body.style.mozAnimation!==void 0){return"-moz-keyframes"}return"keyframes"};t.withPrefix=function(t){var e;e=this.prefixFor(t);if(e==="Moz"){return""+e+(t.substring(0,1).toUpperCase()+t.substring(1))}if(e!==""){return"-"+e.toLowerCase()+"-"+t}return t};t.prefixFor=function(t){var e,i,n,s,r,o,a,l,u,h;s=t.split("-");r="";for(o=0,l=s.length;o<l;o++){n=s[o];r+=n.substring(0,1).toUpperCase()+n.substring(1)}h=["Webkit","Moz"];for(a=0,u=h.length;a<u;a++){i=h[a];e=i+r;if(document.body.style[e]!==void 0){return i}}return""};return t}();m={};m.length=function(t){var e,i,n,s,r;e=0;r=t.elements;for(n=0,s=r.length;n<s;n++){i=r[n];e+=Math.pow(i,2)}return Math.sqrt(e)};m.normalize=function(t){var e,i,n,s,r;n=m.length(t);s=[];r=t.elements;for(i in r){e=r[i];s[i]=e/n}return Vector.create(s)};m.combine=function(t,e,i,n){var s;s=[];s[0]=i*t.elements[0]+n*e.elements[0];s[1]=i*t.elements[1]+n*e.elements[1];s[2]=i*t.elements[2]+n*e.elements[2];return Vector.create(s)};h={};h.decompose=function(t){var e,i,n,s,r,o,a,l,u,h,p,f,c,y,d,v,x,g,b,M,_,F,w,q,T,P,S,k,V,z,B,H;v=[];c=[];y=[];l=[];o=[];if(t.elements[3][3]===0){return false}for(e=q=0;q<=3;e=++q){for(n=T=0;T<=3;n=++T){t.elements[e][n]/=t.elements[3][3]}}a=t.dup();for(e=P=0;P<=2;e=++P){a.elements[e][3]=0}a.elements[3][3]=1;if(t.elements[0][3]!==0||t.elements[1][3]!==0||t.elements[2][3]!==0){u=Vector.create([t.elements[0][3],t.elements[1][3],t.elements[2][3],t.elements[3][3]]);i=a.inverse();x=i.transpose();o=x.multiply(u).elements;t.elements[0][3]=0;t.elements[1][3]=0;t.elements[2][3]=0;t.elements[3][3]=1}else{o=[0,0,0,1]}for(e=S=0;S<=2;e=++S){v[e]=t.elements[3][e];t.elements[3][e]=0}p=[];for(e=V=0;V<=2;e=++V){p[e]=Vector.create([t.elements[e][0],t.elements[e][1],t.elements[e][2]])}c[0]=m.length(p[0]);p[0]=m.normalize(p[0]);y[0]=p[0].dot(p[1]);p[1]=m.combine(p[1],p[0],1,-y[0]);c[1]=m.length(p[1]);p[1]=m.normalize(p[1]);y[0]/=c[1];y[1]=p[0].dot(p[2]);p[2]=m.combine(p[2],p[0],1,-y[1]);y[2]=p[1].dot(p[2]);p[2]=m.combine(p[2],p[1],1,-y[2]);c[2]=m.length(p[2]);p[2]=m.normalize(p[2]);y[1]/=c[2];y[2]/=c[2];r=p[1].cross(p[2]);if(p[0].dot(r)<0){for(e=z=0;z<=2;e=++z){c[e]*=-1;p[e].elements[0]*=-1;p[e].elements[1]*=-1;p[e].elements[2]*=-1}}h=[];h[1]=Math.asin(-p[0].elements[2]);if(Math.cos(h[1])!==0){h[0]=Math.atan2(p[1].elements[2],p[2].elements[2]);h[2]=Math.atan2(p[0].elements[1],p[0].elements[0])}else{h[0]=Math.atan2(-p[2].elements[0],p[1].elements[1]);h[1]=0}d=p[0].elements[0]+p[1].elements[1]+p[2].elements[2]+1;if(d>1e-4){f=.5/Math.sqrt(d);M=.25/f;_=(p[2].elements[1]-p[1].elements[2])*f;F=(p[0].elements[2]-p[2].elements[0])*f;w=(p[1].elements[0]-p[0].elements[1])*f}else if(p[0].elements[0]>p[1].elements[1]&&p[0].elements[0]>p[2].elements[2]){f=Math.sqrt(1+p[0].elements[0]-p[1].elements[1]-p[2].elements[2])*2;_=.25*f;F=(p[0].elements[1]+p[1].elements[0])/f;w=(p[0].elements[2]+p[2].elements[0])/f;M=(p[2].elements[1]-p[1].elements[2])/f}else if(p[1].elements[1]>p[2].elements[2]){f=Math.sqrt(1+p[1].elements[1]-p[0].elements[0]-p[2].elements[2])*2;_=(p[0].elements[1]+p[1].elements[0])/f;F=.25*f;w=(p[1].elements[2]+p[2].elements[1])/f;M=(p[0].elements[2]-p[2].elements[0])/f}else{f=Math.sqrt(1+p[2].elements[2]-p[0].elements[0]-p[1].elements[1])*2;_=(p[0].elements[2]+p[2].elements[0])/f;F=(p[1].elements[2]+p[2].elements[1])/f;w=.25*f;M=(p[1].elements[0]-p[0].elements[1])/f}l[0]=_;l[1]=F;l[2]=w;l[3]=M;H=[v,c,y,l,o,h];for(B=0,k=H.length;B<k;B++){g=H[B];for(s in g){b=g[s];if(isNaN(b)){g[s]=0}}}return{translate:v,scale:c,skew:y,quaternion:l,perspective:o,rotate:h}};h.interpolate=function(t,e,i){var n,s,r,o,a,l,u,h,p,f,m,c,y,d,v,x,g,b,M,_,F,w,q,T,P,S,k;d={translate:[],scale:[],skew:[],quaternion:[],perspective:[]};S=["translate","scale","skew","perspective"];for(q=0,P=S.length;q<P;q++){b=S[q];for(v=T=0,k=t[b].length-1;0<=k?T<=k:T>=k;v=0<=k?++T:--T){d[b][v]=(e[b][v]-t[b][v])*i+t[b][v]}}M=t.quaternion;_=e.quaternion;o=M[0];a=M[1];l=M[2];r=M[3];h=_[0];n=_[1];p=_[2];u=_[3];s=o*h+a*n+l*p+r*u;if(s<0){o=-o;a=-a;l=-l;r=-r;s=-s}if(s+1>.05){if(1-s>=.05){w=Math.acos(s);g=1/Math.sin(w);F=Math.sin(w*(1-i))*g;x=Math.sin(w*i)*g}else{F=1-i;x=i}}else{h=-a;n=o;p=-r;u=l;F=Math.sin(piDouble*(.5-i));x=Math.sin(piDouble*i)}m=o*F+h*x;c=a*F+n*x;y=l*F+p*x;f=r*F+u*x;d.quaternion[0]=m;d.quaternion[1]=c;d.quaternion[2]=y;d.quaternion[3]=f;return d};h.recompose=function(t){var e,i,n,s,r,o,a,l,u,h,p,f,m,c,y,d,v,x;h=t.translate;a=t.scale;l=t.skew;r=t.quaternion;s=t.perspective;n=Matrix.I(4);for(e=y=0;y<=3;e=++y){n.elements[e][3]=s[e]}f=r[0];m=r[1];c=r[2];p=r[3];if(l[2]){u=Matrix.I(4);u.elements[2][1]=l[2];n=n.multiply(u)}if(l[1]){u=Matrix.I(4);u.elements[2][0]=l[1];n=n.multiply(u)}if(l[0]){u=Matrix.I(4);u.elements[1][0]=l[0];n=n.multiply(u)}o=Matrix.I(4);o.elements[0][0]=1-2*(m*m+c*c);o.elements[0][1]=2*(f*m-c*p);o.elements[0][2]=2*(f*c+m*p);o.elements[1][0]=2*(f*m+c*p);o.elements[1][1]=1-2*(f*f+c*c);o.elements[1][2]=2*(m*c-f*p);o.elements[2][0]=2*(f*c-m*p);o.elements[2][1]=2*(m*c+f*p);o.elements[2][2]=1-2*(f*f+m*m);n=n.multiply(o);for(e=d=0;d<=2;e=++d){for(i=v=0;v<=2;i=++v){n.elements[e][i]*=a[e]}}for(e=x=0;x<=2;e=++x){n.elements[3][e]=h[e]}return n};h.matrixToString=function(t){var e,i,n,s,r,o;s="matrix3d(";e=[];for(i=r=0;r<=3;i=++r){for(n=o=0;o<=3;n=++o){e[i*4+n]=t.elements[i][n]}}s+=e.join(",");s+=")";return s};e=[];y=function(t){var i,n,s,r;r=[];for(n=0,s=e.length;n<s;n++){i=e[n];if(i.el===t){r.push(i.stop())}else{r.push(void 0)}}return r};c=function(t,e){var i,s,r;r=[];for(i in e){s=e[i];r.push(t.style[n.withPrefix(i)]=s)}return r};t=function(){t.index=0;function t(t,i,n){var s;this.el=t;this.to=i;if(n==null){n={}}this.apply=d(this.apply,this);this.frame=d(this.frame,this);this.stop=d(this.stop,this);this.start=d(this.start,this);this.defaultForProperty=d(this.defaultForProperty,this);this.parseFrames=d(this.parseFrames,this);this.getFirstFrame=d(this.getFirstFrame,this);this.convertToMatrix3d=d(this.convertToMatrix3d,this);this.convertTransformToMatrix=d(this.convertTransformToMatrix,this);this.dynamic=d(this.dynamic,this);this.setOptions=d(this.setOptions,this);if(window["jQuery"]&&this.el instanceof jQuery){this.el=this.el[0]}this.animating=false;s=this.el.offsetHeight;this.frames=this.parseFrames({0:this.getFirstFrame(this.to),100:this.to});this.setOptions(n);if(this.options.debugName&&r.InteractivePanel){r.InteractivePanel.addAnimation(this)}e.push(this)}t.prototype.setOptions=function(t){var e,i,n,s,o,a,l,h,p,f;if(t==null){t={}}e=(a=this.options)!=null?a.optionsChanged:void 0;this.options=t;if((l=(i=this.options).duration)==null){i.duration=1e3}if((h=(n=this.options).complete)==null){n.complete=null}if((p=(s=this.options).type)==null){s.type=u}if((f=(o=this.options).animated)==null){o.animated=true}this.returnsToSelf=false||this.dynamic().returnsToSelf;this._dynamic=null;if(this.options.debugName&&r.Overrides&&r.Overrides["for"](this.options.debugName)){this.options=r.Overrides.getOverride(this.options,this.options.debugName)}this.dynamic().init();return typeof e==="function"?e():void 0};t.prototype.dynamic=function(){var t;if((t=this._dynamic)==null){this._dynamic=new this.options.type(this.options)}return this._dynamic};t.prototype.convertTransformToMatrix=function(t,e){var i,s,r;i=document.createElement("div");i.style[n.transform()]=t;document.body.appendChild(i);r=window.getComputedStyle(i,null);s=r.transform||r[n.transform()];document.body.removeChild(i);return s};t.prototype.convertToMatrix3d=function(t){var e,i,n,s,r,o,a,l,u,h,p,f;if(!/matrix/.test(t)){t="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)"}else{l=t.match(/matrix\(([-0-9\.]*), ([-0-9\.]*), ([-0-9\.]*), ([-0-9\.]*), ([-0-9\.]*), ([-0-9\.]*)\)/);if(l){e=parseFloat(l[1]);i=parseFloat(l[2]);n=parseFloat(l[3]);r=parseFloat(l[4]);h=parseFloat(l[5]);p=parseFloat(l[6]);t="matrix3d("+e+", "+i+", 0, 0, "+n+", "+r+", 0, 0, 0, 0, 1, 0, "+h+", "+p+", 0, 1)"}}l=t.match(/matrix3d\(([^)]*)\)/);o=null;if(l){s=l[1];o=s.split(",").map(parseFloat)}u=[];for(a=f=0;f<=3;a=++f){u.push(o.slice(a*4,a*4+4))}return Matrix.create(u)};t.prototype.getFirstFrame=function(t){var e,i,s,r;e={};s=window.getComputedStyle(this.el,null);for(i in t){r=this.el.style[n.withPrefix(i)];if(!r){r=s[n.withPrefix(i)]}e[i]=r}return e};t.prototype.parseFrames=function(t){var e,i,n,s,r,o,a,l,u,p;n={};for(r in t){o=t[r];s={};for(e in o){l=o[e];if(e!=="transform"){u=l+"";i=u.match(/([-0-9.]*)(.*)/);p=parseFloat(i[1]);a=i[2]}else{p=h.decompose(this.convertToMatrix3d(this.convertTransformToMatrix(l)));a=""}s[e]={value:p,unit:a}}n[r]=s}return n};t.prototype.defaultForProperty=function(t){if(t==="opacity"){return 1}return 0};t.prototype.start=function(){y(this.el);if(!this.options.animated){this.apply(1,{progress:1});return}this.animating=true;this.ts=null;if(this.stopped){this.stopped=false}return requestAnimationFrame(this.frame)};t.prototype.stop=function(){this.animating=false;return this.stopped=true};t.prototype.frame=function(t){var e,i,n,s;if(this.stopped){return}n=0;if(this.ts){i=t-this.ts;n=i/this.options.duration}else{this.ts=t}e=this.dynamic().at(n);this.apply(e[1],{progress:n});if(n<1){return requestAnimationFrame(this.frame)}else{this.animating=false;this.dynamic().init();return typeof(s=this.options).complete==="function"?s.complete(this):void 0}};t.prototype.apply=function(t,e){var i,n,s,r,o,a,l,u,p,f,m,y,d;if(e==null){e={}}n=this.frames[0];s=this.frames[100];u=e.progress;if(u==null){u=-1}f="";p={};for(r in s){y=s[r];d=y.value;m=y.unit;a=null;if(u>=1){if(this.returnsToSelf){a=n[r].value}else{a=s[r].value}}if(r==="transform"){if(a==null){a=h.interpolate(n[r].value,s[r].value,t)}o=h.recompose(a);p["transform"]=h.matrixToString(o)}else{if(!a){l=null;if(n[r]){l=n[r].value}if(l==null){l=this.defaultForProperty(r)}i=d-l;a=l+i*t}p[r]=a}}return c(this.el,p)};return t}();r={Animation:t,Types:{Spring:f,SelfSpring:p,Gravity:a,GravityWithForce:l,Linear:u,Bezier:i,EaseInOut:o},css:c};try{if(module){module.exports=r}else{this.Dynamics=r}}catch(g){this.Dynamics=r}}).call(this);