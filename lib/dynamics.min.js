(function(){var t,i,e,n,r,o,s,a,u,h,p,f,l,c,m,y,d,v,g,x=function(t,i){return function(){return t.apply(i,arguments)}},b={}.hasOwnProperty,M=function(t,i){for(var e in i){if(b.call(i,e))t[e]=i[e]}function n(){this.constructor=t}n.prototype=i.prototype;t.prototype=new n;t.__super__=i.prototype;return t};r=function(){t.properties={};function t(t){var i,e,n;this.options=t!=null?t:{};this.at=x(this.at,this);this.next=x(this.next,this);this.init=x(this.init,this);n=this.options.type.properties;for(i in n){e=n[i];if(!(this.options[i]!=null)&&!e.editable){this.options[i]=e["default"]}}}t.prototype.init=function(){return this.t=0};t.prototype.next=function(t){var i;if(this.t>1){this.t=1}i=this.at(this.t);this.t+=t;return i};t.prototype.at=function(t){return[t,t]};return t}();h=function(t){M(i,t);function i(){this.at=x(this.at,this);this.init=x(this.init,this);return i.__super__.constructor.apply(this,arguments)}i.properties={duration:{min:100,max:4e3,"default":1e3}};i.prototype.init=function(){return i.__super__.init.apply(this,arguments)};i.prototype.at=function(t){return[t,t]};return i}(r);a=function(t){M(i,t);i.properties={bounce:{min:0,max:80,"default":40},gravity:{min:1,max:4e3,"default":1e3},expectedDuration:{editable:false}};function i(t){var e;this.options=t!=null?t:{};this.at=x(this.at,this);this.curve=x(this.curve,this);this.init=x(this.init,this);this.length=x(this.length,this);this.gravityValue=x(this.gravityValue,this);this.bounceValue=x(this.bounceValue,this);this.duration=x(this.duration,this);this.expectedDuration=x(this.expectedDuration,this);if((e=this.initialForce)==null){this.initialForce=false}this.options.duration=this.duration();i.__super__.constructor.call(this,this.options)}i.prototype.expectedDuration=function(){return this.duration()};i.prototype.duration=function(){return Math.round(1e3*1e3/this.options.gravity*this.length())};i.prototype.bounceValue=function(){var t;t=this.options.bounce/100;t=Math.min(t,80);return t};i.prototype.gravityValue=function(){return this.options.gravity/100};i.prototype.length=function(){var t,i,e,n,r;e=this.bounceValue();r=this.gravityValue();i=Math.sqrt(2/r);n={a:-i,b:i,H:1};if(this.initialForce){n.a=0;n.b=n.b*2}while(n.H>.001){t=n.b-n.a;n={a:n.b,b:n.b+t*e,H:n.H*e*e}}return n.b};i.prototype.init=function(){var t,e,n,r,o,s;i.__super__.init.apply(this,arguments);t=this.length();o=this.gravityValue();o=o*t*t;n=this.bounceValue();e=Math.sqrt(2/o);this.curves=[];r={a:-e,b:e,H:1};if(this.initialForce){r.a=0;r.b=r.b*2}this.curves.push(r);s=[];while(r.b<1&&r.H>.001){t=r.b-r.a;r={a:r.b,b:r.b+t*n,H:r.H*n*n};s.push(this.curves.push(r))}return s};i.prototype.curve=function(t,i,e,n){var r,o,s;r=i-t;s=2/r*n-1-t*2/r;o=s*s*e-e+1;if(this.initialForce){o=1-o}return o};i.prototype.at=function(t){var i,e,n,r,o;i=this.options.bounce/100;n=this.options.gravity;r=0;e=this.curves[r];while(!(t>=e.a&&t<=e.b)){r+=1;e=this.curves[r];if(!e){break}}if(!e){if(this.initialForce){o=0}else{o=1}}else{o=this.curve(e.a,e.b,e.H,t)}return[t,o]};return i}(r);u=function(t){M(i,t);i.prototype.returnsToSelf=true;function i(t){this.options=t!=null?t:{};this.initialForce=true;i.__super__.constructor.call(this,this.options)}return i}(a);l=function(t){M(i,t);function i(){this.at=x(this.at,this);return i.__super__.constructor.apply(this,arguments)}i.properties={frequency:{min:0,max:100,"default":15},friction:{min:1,max:1e3,"default":200},anticipationStrength:{min:0,max:1e3,"default":0},anticipationSize:{min:0,max:99,"default":0},duration:{min:100,max:4e3,"default":1e3}};i.prototype.at=function(t){var i,e,n,r,o,s,a,u,h,p,f,l,c,m=this;a=Math.max(1,this.options.frequency);u=Math.pow(20,this.options.friction/100);p=this.options.anticipationSize/100;s=Math.max(0,p);h=t/(1-p)-p/(1-p);if(t<p){i=function(t){var i,e,n,r,o;i=.8;r=p/(1-p);o=0;n=(r-i*o)/(r-o);e=(i-n)/r;return e*t*m.options.anticipationStrength/100+n};c=p/(1-p)-p/(1-p);l=0/(1-p)-p/(1-p);o=Math.acos(1/i(c));n=(Math.acos(1/i(l))-o)/(a*-p)}else{i=function(t){return Math.pow(u/10,-t)*(1-t)};o=0;n=1}e=i(h);r=a*(t-p)*n+o;f=1-e*Math.cos(r);return[t,f,e,h,r]};return i}(r);f=function(t){M(i,t);function i(){this.at=x(this.at,this);return i.__super__.constructor.apply(this,arguments)}i.properties={frequency:{min:0,max:100,"default":15},friction:{min:1,max:1e3,"default":200},duration:{min:100,max:4e3,"default":1e3}};i.prototype.returnsToSelf=true;i.prototype.at=function(t){var i,e,n,r,o,s,a,u,h=this;s=Math.max(1,this.options.frequency);a=Math.pow(20,this.options.friction/100);i=function(t){return 1-Math.pow(a/10,-t)*(1-t)};e=i(t);n=i(1-t);r=Math.cos(t*2*3.14-3.14)/2+.5;r=Math.pow(r,this.options.friction/100);o=s*t;u=Math.cos(o)*r;return[t,u,r,-r]};return i}(r);e=function(t){M(i,t);i.properties={points:{type:"points","default":[{x:0,y:0,controlPoints:[{x:.2,y:0}]},{x:.5,y:1.2,controlPoints:[{x:.3,y:1.2},{x:.8,y:1.2}]},{x:1,y:1,controlPoints:[{x:.8,y:1}]}]},duration:{min:100,max:4e3,"default":1e3}};function i(t){this.options=t!=null?t:{};this.at=x(this.at,this);this.yForX=x(this.yForX,this);this.B=x(this.B,this);this.B_=x(this.B_,this);this.returnsToSelf=this.options.points[this.options.points.length-1].y===0;i.__super__.constructor.call(this,this.options)}i.prototype.B_=function(t,i,e,n,r){return Math.pow(1-t,3)*i+3*Math.pow(1-t,2)*t*e+3*(1-t)*Math.pow(t,2)*n+Math.pow(t,3)*r};i.prototype.B=function(t,i,e,n,r){return{x:this.B_(t,i.x,e.x,n.x,r.x),y:this.B_(t,i.y,e.y,n.y,r.y)}};i.prototype.yForX=function(t,i){var e,n,r,o,s,a,u,h,p,f;e=null;for(p=0,f=i.length;p<f;p++){n=i[p];if(t>=n(0).x&&t<=n(1).x){e=n}if(e!==null){break}}if(!e){if(this.returnsToSelf){return 0}else{return 1}}h=1e-4;o=0;a=1;s=(a+o)/2;u=e(s).x;r=0;while(Math.abs(t-u)>h&&r<100){if(t>u){o=s}else{a=s}s=(a+o)/2;u=e(s).x;r+=1}return e(s).y};i.prototype.at=function(t){var e,n,r,o,s,a,u,h=this;s=t;o=this.options.points||i.properties.points["default"];e=[];u=function(t,i){var n;n=function(e){return h.B(e,t,t.controlPoints[t.controlPoints.length-1],i.controlPoints[0],i)};return e.push(n)};for(n in o){r=parseInt(n);if(r>=o.length-1){break}u(o[r],o[r+1])}a=this.yForX(s,e);return[s,a]};return i}(r);s=function(t){M(i,t);i.properties={friction:{min:1,max:1e3,"default":500},duration:{min:100,max:4e3,"default":1e3}};function i(t){var n,r;this.options=t!=null?t:{};this.at=x(this.at,this);i.__super__.constructor.apply(this,arguments);n=this.options.friction||i.properties.friction["default"];r=[{x:0,y:0,controlPoints:[{x:1-n/1e3,y:0}]},{x:1,y:1,controlPoints:[{x:n/1e3,y:1}]}];this.bezier=new e({type:e,duration:this.options.duration,points:r})}i.prototype.at=function(t){return this.bezier.at(t)};return i}(r);m=function(t){var i,e;e={};i=function(){var i,n,r,o,s;n="";for(o=0,s=arguments.length;o<s;o++){i=arguments[o];n+=i.toString()+","}r=e[n];if(!r){e[n]=r=t.apply(this,arguments)}return r};return i};n=function(){function t(){}t.transform=function(){return this.withPrefix("transform")};t.keyframes=function(){if(document.body.style.webkitAnimation!==void 0){return"-webkit-keyframes"}if(document.body.style.mozAnimation!==void 0){return"-moz-keyframes"}return"keyframes"};t.withPrefix=function(t){var i;i=this.prefixFor(t);if(i==="Moz"){return""+i+(t.substring(0,1).toUpperCase()+t.substring(1))}if(i!==""){return"-"+i.toLowerCase()+"-"+t}return t};t.prefixFor=m(function(t){var i,e,n,r,o,s,a,u,h,p;r=t.split("-");o="";for(s=0,u=r.length;s<u;s++){n=r[s];o+=n.substring(0,1).toUpperCase()+n.substring(1)}p=["Webkit","Moz"];for(a=0,h=p.length;a<h;a++){e=p[a];i=e+o;if(document.body.style[i]!==void 0){return e}}return""});return t}();c={};c.length=function(t){var i,e,n,r,o;i=0;o=t.elements;for(n=0,r=o.length;n<r;n++){e=o[n];i+=Math.pow(e,2)}return Math.sqrt(i)};c.normalize=function(t){var i,e,n,r,o;n=c.length(t);r=[];o=t.elements;for(e in o){i=o[e];r[e]=i/n}return Vector.create(r)};c.combine=function(t,i,e,n){var r,o,s;o=[];for(r=s=0;s<=2;r=++s){o[r]=e*t.elements[r]+n*i.elements[r]}return Vector.create(o)};p={};p.decompose=function(t){var i,e,n,r,o,s,a,u,h,p,f,l,m,y,d,v,g,x,b,M,_,w,F,T,S,P,q,k,V,z,B,O,H,C,D,A;x=[];d=[];v=[];h=[];a=[];i=t.elements;if(i[3][3]===0){return false}for(e=P=0;P<=3;e=++P){for(r=q=0;q<=3;r=++q){i[e][r]/=i[3][3]}}u=t.dup();for(e=k=0;k<=2;e=++k){u.elements[e][3]=0}u.elements[3][3]=1;if(i[0][3]!==0||i[1][3]!==0||i[2][3]!==0){p=Vector.create(i.slice(0,4)[3]);n=u.inverse();b=n.transpose();a=b.multiply(p).elements;for(e=V=0;V<=2;e=++V){i[e][3]=0}i[3][3]=1}else{a=[0,0,0,1]}for(e=B=0;B<=2;e=++B){x[e]=i[3][e];i[3][e]=0}l=[];for(e=O=0;O<=2;e=++O){l[e]=Vector.create(i[e].slice(0,3))}d[0]=c.length(l[0]);l[0]=c.normalize(l[0]);v[0]=l[0].dot(l[1]);l[1]=c.combine(l[1],l[0],1,-v[0]);d[1]=c.length(l[1]);l[1]=c.normalize(l[1]);v[0]/=d[1];v[1]=l[0].dot(l[2]);l[2]=c.combine(l[2],l[0],1,-v[1]);v[2]=l[1].dot(l[2]);l[2]=c.combine(l[2],l[1],1,-v[2]);d[2]=c.length(l[2]);l[2]=c.normalize(l[2]);v[1]/=d[2];v[2]/=d[2];s=l[1].cross(l[2]);if(l[0].dot(s)<0){for(e=H=0;H<=2;e=++H){d[e]*=-1;for(r=C=0;C<=2;r=++C){l[e].elements[r]*=-1}}}m=function(t,i){return l[t].elements[i]};f=[];f[1]=Math.asin(-m(0,2));if(Math.cos(f[1])!==0){f[0]=Math.atan2(m(1,2),m(2,2));f[2]=Math.atan2(m(0,1),m(0,0))}else{f[0]=Math.atan2(-m(2,0),m(1,1));f[1]=0}g=m(0,0)+m(1,1)+m(2,2)+1;if(g>1e-4){y=.5/Math.sqrt(g);w=.25/y;F=(m(2,1)-m(1,2))*y;T=(m(0,2)-m(2,0))*y;S=(m(1,0)-m(0,1))*y}else if(m(0,0)>m(1,1)&&m(0,0)>m(2,2)){y=Math.sqrt(1+m(0,0)-m(1,1)-m(2,2))*2;F=.25*y;T=(m(0,1)+m(1,0))/y;S=(m(0,2)+m(2,0))/y;w=(m(2,1)-m(1,2))/y}else if(m(1,1)>m(2,2)){y=Math.sqrt(1+m(1,1)-m(0,0)-m(2,2))*2;F=(m(0,1)+m(1,0))/y;T=.25*y;S=(m(1,2)+m(2,1))/y;w=(m(0,2)-m(2,0))/y}else{y=Math.sqrt(1+m(2,2)-m(0,0)-m(1,1))*2;F=(m(0,2)+m(2,0))/y;T=(m(1,2)+m(2,1))/y;S=.25*y;w=(m(1,0)-m(0,1))/y}h=[F,T,S,w];A=[x,d,v,h,a,f];for(D=0,z=A.length;D<z;D++){M=A[D];for(o in M){_=M[o];if(isNaN(_)){M[o]=0}}}return{translate:x,scale:d,skew:v,quaternion:h,perspective:a,rotate:f}};p.interpolate=function(t,i,e){var n,r,o,s,a,u,h,p,f,l,c,m,y,d,v,g,x;r={translate:[],scale:[],skew:[],quaternion:[],perspective:[]};g=["translate","scale","skew","perspective"];for(c=0,v=g.length;c<v;c++){u=g[c];for(o=m=0,x=t[u].length-1;0<=x?m<=x:m>=x;o=0<=x?++m:--m){r[u][o]=(i[u][o]-t[u][o])*e+t[u][o]}}h=t.quaternion;p=i.quaternion;n=h[0]*p[0]+h[1]*p[1]+h[2]*p[2]+h[3]*p[3];if(n<0){for(o=y=0;y<=3;o=++y){h[o]=-h[o]}n=-n}if(n+1>.05){if(1-n>=.05){l=Math.acos(n);a=1/Math.sin(l);f=Math.sin(l*(1-e))*a;s=Math.sin(l*e)*a}else{f=1-e;s=e}}else{p[0]=-h[1];p[1]=h[0];p[2]=-h[3];p[3]=h[2];f=Math.sin(piDouble*(.5-e));s=Math.sin(piDouble*e)}for(o=d=0;d<=3;o=++d){r.quaternion[o]=h[o]*f+p[o]*s}return r};p.recompose=function(t){var i,e,n,r,o,s,a,u,h,p,f,l,c,m,y;r=Matrix.I(4);for(i=l=0;l<=3;i=++l){r.elements[i][3]=t.perspective[i]}o=t.quaternion;h=o[0];p=o[1];f=o[2];u=o[3];s=t.skew;n=[[1,0],[2,0],[2,1]];for(i=c=2;c>=0;i=--c){if(s[i]){a=Matrix.I(4);a.elements[n[i][0]][n[i][1]]=s[i];r=r.multiply(a)}}r=r.multiply(Matrix.create([[1-2*(p*p+f*f),2*(h*p-f*u),2*(h*f+p*u),0],[2*(h*p+f*u),1-2*(h*h+f*f),2*(p*f-h*u),0],[2*(h*f-p*u),2*(p*f+h*u),1-2*(h*h+p*p),0],[0,0,0,1]]));for(i=m=0;m<=2;i=++m){for(e=y=0;y<=2;e=++y){r.elements[i][e]*=t.scale[i]}r.elements[3][i]=t.translate[i]}return r};p.matrixToString=function(t){var i,e,n,r,o;n="matrix3d(";for(i=r=0;r<=3;i=++r){for(e=o=0;o<=3;e=++o){n+=t.elements[i][e];if(!(i===3&&e===3)){n+=","}}}n+=")";return n};p.transformStringToMatrixString=m(function(t){var i,e,r;i=document.createElement("div");i.style[n.transform()]=t;document.body.appendChild(i);r=window.getComputedStyle(i,null);e=r.transform||r[n.transform()];document.body.removeChild(i);return e});i=[];d=function(t,i){var e,n;for(e in t){n=t[e];if(i[e]!=null){return true}}return false};g=function(t,e){var n,r,o,s;s=[];for(r=0,o=i.length;r<o;r++){n=i[r];if(n.el===t&&d(n.to,e)){s.push(n.stop())}else{s.push(void 0)}}return s};v=["marginTop","marginLeft","marginBottom","marginRight","paddingTop","paddingLeft","paddingBottom","paddingRight","top","left","bottom","right"];y=function(t,i){var e,r,o,s;s=[];for(e in i){o=i[e];r="";if(v.indexOf(e.toLowerCase())!==-1){r="px"}s.push(t.style[n.withPrefix(e)]=""+o+r)}return s};t=function(){t.index=0;function t(t,e,n){var r;this.el=t;this.to=e;if(n==null){n={}}this.apply=x(this.apply,this);this.frame=x(this.frame,this);this.stop=x(this.stop,this);this._start=x(this._start,this);this.start=x(this.start,this);this.defaultForProperty=x(this.defaultForProperty,this);this.parseFrames=x(this.parseFrames,this);this.getFirstFrame=x(this.getFirstFrame,this);this.convertToMatrix3d=x(this.convertToMatrix3d,this);this.convertTransformToMatrix=x(this.convertTransformToMatrix,this);this.dynamic=x(this.dynamic,this);this.setOptions=x(this.setOptions,this);if(window["jQuery"]&&this.el instanceof jQuery){this.el=this.el[0]}this.animating=false;r=this.el.offsetHeight;this.frames=this.parseFrames({0:this.getFirstFrame(this.to),100:this.to});this.setOptions(n);if(this.options.debugName&&o.InteractivePanel){o.InteractivePanel.addAnimation(this)}i.push(this)}t.prototype.setOptions=function(t){var i,e,n,r,s,a,u,p,f,l;if(t==null){t={}}i=(a=this.options)!=null?a.optionsChanged:void 0;this.options=t;if((u=(e=this.options).duration)==null){e.duration=1e3}if((p=(n=this.options).complete)==null){n.complete=null}if((f=(r=this.options).type)==null){r.type=h}if((l=(s=this.options).animated)==null){s.animated=true}this.returnsToSelf=false||this.dynamic().returnsToSelf;this._dynamic=null;if(this.options.debugName&&o.Overrides&&o.Overrides["for"](this.options.debugName)){this.options=o.Overrides.getOverride(this.options,this.options.debugName)}this.dynamic().init();return typeof i==="function"?i():void 0};t.prototype.dynamic=function(){var t;if((t=this._dynamic)==null){this._dynamic=new this.options.type(this.options)}return this._dynamic};t.prototype.convertTransformToMatrix=function(t){return p.transformStringToMatrixString(t)};t.prototype.convertToMatrix3d=function(t){var i,e,n,r,o,s;r=t.match(/matrix3?d?\(([-0-9, \.]*)\)/);if(r){i=r[1].split(",");i=i.map(parseFloat);if(i.length===6){e=[i[0],i[1],0,0,i[2],i[3],0,0,0,0,1,0,i[4],i[5],0,1]}else{e=i}}else{e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}o=[];for(n=s=0;s<=3;n=++s){o.push(e.slice(n*4,n*4+4))}return Matrix.create(o)};t.prototype.getFirstFrame=function(t){var i,e,r,o;i={};r=window.getComputedStyle(this.el,null);for(e in t){o=this.el.style[n.withPrefix(e)];if(!o){o=r[n.withPrefix(e)]}i[e]=o}return i};t.prototype.parseFrames=function(t){var i,e,n,r,o,s,a,u,h,f;n={};for(o in t){s=t[o];r={};for(i in s){u=s[i];if(i!=="transform"){h=u+"";e=h.match(/([-0-9.]*)(.*)/);f=parseFloat(e[1]);a=e[2]}else{f=p.decompose(this.convertToMatrix3d(this.convertTransformToMatrix(u)));a=""}r[i]={value:f,unit:a}}n[o]=r}return n};t.prototype.defaultForProperty=function(t){if(t==="opacity"){return 1}return 0};t.prototype.start=function(t){var i;if(t==null){t={}}if((i=t.delay)==null){t.delay=0}g(this.el,this.to);if(t.delay<=0){return this._start()}else{return setTimeout(this._start,t.delay)}};t.prototype._start=function(){if(!this.options.animated){this.apply(1,{progress:1});return}this.animating=true;this.ts=null;if(this.stopped){this.stopped=false}return requestAnimationFrame(this.frame)};t.prototype.stop=function(){this.animating=false;return this.stopped=true};t.prototype.frame=function(t){var i,e,n,r;if(this.stopped){return}n=0;if(this.ts){e=t-this.ts;n=e/this.options.duration}else{this.ts=t}i=this.dynamic().at(n);this.apply(i[1],{progress:n});if(n<1){return requestAnimationFrame(this.frame)}else{this.animating=false;this.dynamic().init();return typeof(r=this.options).complete==="function"?r.complete(this):void 0}};t.prototype.apply=function(t,i){var e,n,r,o,s,a,u,h,f,l,c,m,d;if(i==null){i={}}n=this.frames[0];r=this.frames[100];h=i.progress;if(h==null){h=-1}l="";f={};for(o in r){m=r[o];d=m.value;c=m.unit;a=null;if(h>=1){if(this.returnsToSelf){a=n[o].value}else{a=r[o].value}}if(o==="transform"){if(a==null){a=p.interpolate(n[o].value,r[o].value,t)}s=p.recompose(a);f["transform"]=p.matrixToString(s)}else{if(!a){u=null;if(n[o]){u=n[o].value}if(u==null){u=this.defaultForProperty(o)}e=d-u;a=u+e*t}f[o]=a}}return y(this.el,f)};return t}();o={Animation:t,Types:{Spring:l,SelfSpring:f,Gravity:a,GravityWithForce:u,Linear:h,Bezier:e,EaseInOut:s},css:y};try{if(module){module.exports=o}else{this.Dynamics=o}}catch(_){this.Dynamics=o}}).call(this);